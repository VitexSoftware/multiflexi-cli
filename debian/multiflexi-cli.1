.TH MULTIFLEXI-CLI 1 "November 2025" "MultiFlexi" "User Commands"
.SH NAME
multiflexi-cli \- MultiFlexi command-line interface for application and job management
.SH SYNOPSIS
.B multiflexi-cli
[\fICOMMAND\fR] [\fIACTION\fR] [\fIOPTIONS\fR]
.SH DESCRIPTION
.B multiflexi-cli
is a command-line tool for managing MultiFlexi applications, jobs, users, tokens, companies, runtemplates, credentials, queues, and more. It provides CRUD operations, scheduling, and status checks for all major MultiFlexi entities. Output can be formatted as text or JSON for automation and scripting.

.SH COMMANDS
.TP
.B application
Manage applications
.RS
Actions: list, get, create, update, delete, import-json, export-json, remove-json, validate-json, showconfig
Options: --id, --name, --uuid, --description, --topics, --executable, --ociimage, --requirements, --homepage, --file, --appversion, --format, --help
.RE
.TP
.B job
Manage jobs
.RS
Actions: status, list, get, create, update, delete
Options: --id, --runtemplate_id, --scheduled, --executor, --schedule_type, --app_id, --limit, --offset, --order, --fields, --format, --help
.RE
.TP
.B user
Manage users
.RS
Actions: list, get, create, update, delete, data-erasure
Options: --id, --login, --email, --firstname, --lastname, --password, --plaintext, --enabled, --format, --help
.RE
.TP
.B user:data-erasure
Manage GDPR user data erasure requests
.RS
Actions: list, create, approve, reject, process, audit, cleanup
Options: --user-id, --user-login, --request-id, --deletion-type, --reason, --notes, --force, --export-audit, --status, --format, --help
.RE
.TP
.B token
Manage tokens
.RS
Actions: list, get, create, generate, update
Options: --id, --user, --token, --format, --help
.RE
.TP
.B company
Manage companies
.RS
Actions: list, get, create, update, remove
Options: --id, --name, --customer, --enabled, --settings, --logo, --ic, --DatCreate, --DatUpdate, --email, --slug, --fields, --zabbix_host, --format, --help
.RE
.TP
.B runtemplate
Manage runtemplates
.RS
Actions: list, get, create, update, delete, schedule
Options: --id, --name, --app_id, --app_uuid, --company_id, --company, --interv, --cron, --active, --config, --schedule_time, --executor, --env, --fields, --format, --help

Note: Only runtemplates with active=1 can be scheduled. Inactive runtemplates will be rejected.
.RE
.TP
.B artifact
Manage job artifacts
.RS
Actions: list, get, save
Options: --id, --job_id, --file, --fields, --format, --help
.RE
.TP
.B credential
Manage credentials
.RS
Actions: list, get, create, update, remove
Options: --id, --name, --company-id, --credential-type-id, --fields, --format, --help
.RE
.TP
.B credtype
Credential type operations (list, get, update, import, import-json, export-json, remove-json, validate-json)
.RS
Actions: list, get, update, import, import-json, export-json, remove-json, validate-json
Options: --id, --uuid, --name, --file, --format, --help

The credtype command provides comprehensive credential type management with JSON import/export capabilities:
.br
- Schema validation ensures JSON files comply with MultiFlexi credential type schema
.br
- Duplicate detection prevents importing credential types with existing UUIDs
.br
- Localization support for multi-language names and descriptions
.br
- Field definition import with proper types and validation
.br
- Comprehensive error reporting for validation failures and import issues
.RE
.TP
.B encryption
Manage encryption keys
.RS
Actions: init
Options: --format, --help
.RE
.TP
.B companyapp
Manage company-application relations
.RS
Actions: list, get, create, update, delete
Options: --id, --company_id, --app_id, --app_uuid, --limit, --offset, --order, --format, --help
.RE
.TP
.B appstatus
Prints App Status
.RS
Options: --format, --help
.RE
.TP
.B describe
Show all available commands and their parameters in JSON or YAML
.TP
.B completion
Dump the shell completion script
.RS
Arguments: shell (optional - bash, zsh, fish)
Options: --debug, --help
.RE
.TP
.B queue
Queue operations with comprehensive job listing, sorting, and metrics
.RS
Actions: list, truncate, fix, (none for overview)
Options: --format, --limit, --order, --direction, --fields, --help
Features: Schedule type display, human-readable waiting times, flexible sorting by scheduled time or ID, field filtering
.RE
.TP
.B prune
Prune logs and jobs, keeping only the latest N records (default: 1000)
.RS
Options: --logs, --jobs, --keep
.RE

.SH OPTIONS
Most commands support:
.TP
.BR -f ", " --format
Output format: text or json (default: text)
.TP
.BR --id
Specify record by numeric ID
.TP
.BR --uuid
Specify record by UUID (where supported)
.TP
.BR --help
Show help for a command
.TP
.BR --name
Specify record by name (where supported)
.TP
.BR --login
Specify user by login (where supported)
.TP
.BR --email
Specify user/company by email (where supported)
.TP
.BR --company
Specify company by slug or ID (where supported)
.TP
.BR --config
Specify configuration key=value (repeatable, where supported)

.SH EXAMPLES
.TP
List all applications in JSON:
.B multiflexi-cli application list -f json
.TP
Validate application JSON file:
.B multiflexi-cli application validate-json --file=app.json
.TP
Get user by ID:
.B multiflexi-cli user get --id=1
.TP
Create user:
.B multiflexi-cli user create --login jsmith --email jsmith@example.com --plaintext secret
.TP
Create a new token for user ID 3:
.B multiflexi-cli token create --user 3
.TP
Generate a new token:
.B multiflexi-cli token generate --user 2
.TP
Schedule a runtemplate (active=1 required):
.B multiflexi-cli runtemplate schedule --id=123 --schedule_time="2025-07-01 10:00:00" --executor=Native --env=FOO=bar
.TP
Show job status aggregation:
.B multiflexi-cli job status
.TP
Show available commands and options:
.B multiflexi-cli describe
.TP
List artifacts for job ID 123:
.B multiflexi-cli artifact list --job_id=123
.TP
Save artifact to file:
.B multiflexi-cli artifact save --id=456 --file=output.txt
.TP
Create a new credential:
.B multiflexi-cli credential create --company-id=1 --credential-type-id=2 --name="My Credential"
.TP
List all credentials in JSON:
.B multiflexi-cli credential list -f json
.TP
Get credential by ID:
.B multiflexi-cli credential get --id=123
.TP
Import credential type from JSON:
.B multiflexi-cli credtype import-json --file=credtype.json
.TP
Validate credential type JSON before import:
.B multiflexi-cli credtype validate-json --file=credtype.json
.TP
List all credential types:
.B multiflexi-cli credtype list
.TP
Get credential type by UUID:
.B multiflexi-cli credtype get --uuid="d3d3ae58-d64a-4ab4-afb5-ba439ffc8587"
.TP
Export credential type to JSON:
.B multiflexi-cli credtype export-json --id=1 --file=exported.json
.TP
Create company-application relation:
.B multiflexi-cli companyapp create --company_id=1 --app_id=5
.TP
Prune logs and jobs, keeping only the latest 500 records:
.B multiflexi-cli prune --logs --jobs --keep 500
.TP
Show queue overview with metrics:
.B multiflexi-cli queue
.TP
List jobs ordered by scheduled time (earliest first):
.B multiflexi-cli queue list --order after --limit 10
.TP
List jobs ordered by scheduled time (latest first):
.B multiflexi-cli queue list --order after --direction DESC --limit 10
.TP
Show specific queue fields in JSON format:
.B multiflexi-cli queue list --fields "id,after,schedule_type" --format json
.TP
Truncate the job queue:
.B multiflexi-cli queue truncate
.TP
Fix orphaned jobs and queue inconsistencies:
.B multiflexi-cli queue fix
.TP
List user deletion requests:
.B multiflexi-cli user:data-erasure list --status=pending
.TP
Create a soft deletion request:
.B multiflexi-cli user:data-erasure create --user-id=123 --deletion-type=soft --reason="User requested deletion"
.TP
Approve a deletion request:
.B multiflexi-cli user:data-erasure approve --request-id=456 --notes="Approved by admin"
.TP
Process an approved deletion request:
.B multiflexi-cli user:data-erasure process --request-id=456
.TP
Show audit trail for a deletion request:
.B multiflexi-cli user:data-erasure audit --request-id=456 --export-audit=audit.csv
.TP
Re-initialize encryption keys:
.B multiflexi-cli encryption init

.SH AUTHOR
Vítězslav Dvořák <info@vitexsoftware.cz>

.SH SEE ALSO
.BR multiflexi (1)
